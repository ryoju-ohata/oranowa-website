import{u as j,a as R,b as S,t as $,c as D,d as L,e as m,f as T,g as F,h as M,S as N,T as A,$ as V,_ as E,i as K,j as O,k as q,l as z}from"./index.head.composable.fce1f87c.js";import{h as I,s as g,r as h,A as G,P as H,i as J,o as v,b as y,j as u,w as Q,f as U,u as e,F as W,c as X,k as w,a as Y}from"./entry.8f7ed8e4.js";import"./composables.3d6553f4.js";function Z(){const{params:_}=I(),d=j(),i=R(),a=S(),{isLoaded:c}=g(a),n=h(!1);return $(async()=>{if(!c.value)try{n.value=!0;const{token:t,preview:l}=await D.getToken(_.previewId),r=ee(l);d.setProject({project:r}),await G().signIn(t),H().subscribe(r.id,async o=>{const s=L(o);await a.setProduct({product:{...s,fonts:s.fonts||[],colors:s.colors||[],breakPoints:s.breakPoints||[]}}),n.value=!1,s.resources.cmsProjectId&&i.actionInit({cmsId:s.resources.cmsProjectId,isTemplate:!1})})}catch(t){console.error(t)}}),{isLoading:n}}const ee=_=>{const{project_name:d,project_type:i,custom_domain:a,project_display_badge:c,recaptcha_site_key:n,project_id:t}=_;return{name:d,type:i,customDomain:a,displayBadge:c,recaptchaSiteKey:n,id:t,integrations:[]}},te={class:"container"},oe=J({__name:"_previewId",setup(_){const{project:d}=g(j()),{rssMap:i}=g(S()),{isLoading:a}=Z(),c=h(!1),n=I(),t=m(()=>`/live/${n.params.previewId}`),{selectedRoute:l,pageId:r,selectedPage:o}=T(c,t),{dynamicData:s}=F(l,r,c),P=m(()=>t.value+"/"+r.value),f=m(()=>{var p;return{...s.value,$fn:V,$rss:i.value,$route:(p=l.value)==null?void 0:p.params,$url:P.value}});return M(o,f,r,!0),(p,se)=>{const k=E,b=K,x=O,B=q,C=z;return v(),y("div",null,[u(C,null,{default:Q(()=>[U("div",te,[e(o)&&!e(a)?(v(),y(W,{key:0},[u(N,{"root-dom":e(o).view},null,8,["root-dom"]),u(A,{selectedPage:e(o)},null,8,["selectedPage"]),u(k),u(b,{isPreview:!0,basePath:e(t),"root-dom":e(o).view,"selected-page":e(o),"page-rm":e(f)},null,8,["basePath","root-dom","selected-page","page-rm"]),e(d).displayBadge?(v(),X(x,{key:0,url:e(P),"selected-page":e(o)},null,8,["url","selected-page"])):w("",!0)],64)):w("",!0),u(B,{loading:e(a)},null,8,["loading"])])]),_:1})])}}});const re=Y(oe,[["__scopeId","data-v-1c36dc53"]]);export{re as default};
